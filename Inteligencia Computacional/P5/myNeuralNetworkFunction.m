%% Função criada a partir do comando "nnstart" com o banco de dados dá prática

function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 09-Aug-2021 17:10:12.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx12 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1;3.8;0.08;0;0.6;0.009;1;6;0.98711;2.72;0.22;8];
x1_step1.gain = [2;0.165289256198347;1.33333333333333;1.6260162601626;0.0306748466257669;4.84261501210654;0.00694444444444444;0.00460829493087558;38.5579332947754;1.55038759689923;1.42857142857143;0.289855072463768];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.746001964750866664;1.7627917114245339469;-1.5908031868543384135;1.230207183278282379;0.86629068115108964765;-0.85180620105386251062;0.54901726250726057277;-0.73828801900231932898;0.14334258642320682475;0.17365951072099025665;-0.068232466092995644469;0.3976770289660244706;0.71222777748126486763;-0.22664557949974833972;0.82216431176511084455;0.99991862330078051802;-1.2965245932888413982;-1.4830733029230520614;-1.7207449986210885395;-1.8368843583691976118];
IW1_1 = [0.68354972723586893135 -0.19489961852610368509 0.13146183622601070873 -0.73015248674165711407 0.85848918428331177921 0.232487170585209596 0.87888668665102887001 0.20029588755033866931 0.42715964969594605316 0.49824801513788918861 0.39810007208159514658 0.22506786521102806198;-0.49872500597140845269 0.44189079628145200296 -0.56739482974486554756 0.20228033216136417916 0.27174140260193657692 -0.66197513360245652247 -0.31036718436316101943 -0.59029781494935085195 -0.40980532509930617246 0.4900003644946445136 0.25914972345442366386 -0.90637664505898707379;0.42876559878407244364 -0.29355322467287081611 -0.53228737645622481445 0.46276562344177196717 0.63801924403714749268 0.60653684483516379089 0.29319819303726862847 -0.11612746635330813139 -0.036269663426221829261 0.62527912920958128584 0.85001520210981218462 0.64322928847884763837;-0.6698122303729741045 0.3434247829454485923 0.23548608048073974008 -0.23774285149950835638 0.78348342955364369544 -0.20431810982855885817 -0.6322483224756275666 0.62615242137366688979 -0.77674703094776420542 0.19445113182539891516 0.42824988465779645352 0.23801480297403793118;-0.79575428853786023264 0.76074602940106239579 -0.45207172840449977302 0.18527874030223767665 -0.27596304126744830576 0.72490436438351080195 -0.076420792082082397711 0.57254563535148628173 0.1956172942220520683 -0.036479524879328741049 0.91326962730158656179 -0.41856642514934716548;0.58329932085563518385 -0.12314477752941548061 -0.72665960112267491411 0.14065825765109341017 -0.042153474231285792406 -0.27747281801090423192 0.36479658896570915649 -0.24313641547164949186 0.081287374603442194565 0.8136981364865092381 0.5647180493012856628 1.2153257698657762287;-0.47113711937586782996 0.52236212194208331283 0.75727169915170255976 -0.285125490566358053 -0.18417061093356940082 0.27805469872541216381 0.66714477963469620558 -0.6277103847407385917 -0.70165559495937801504 0.050478422964032501619 0.51528747166189736717 0.85474006325373785842;0.055988773927455756652 0.31659572876731156832 0.85603903735519326634 0.77706105864034558106 -0.19932371015667738057 0.41405996156339691661 -0.15331257144273904847 0.81932963677686887483 0.91181803498423097398 0.10126734823698099741 0.58884111186637855262 -0.1078013495748517403;-0.19892905021489434847 -0.73982335287104661337 -0.11269626290601562901 -0.60662146995818688744 -0.051466982802534505526 -0.49270202225052300848 0.50446609601754954788 -0.87292140489008107629 0.32655551849783515106 -0.45434607081860017841 -0.5188794077087354184 0.16934955699487622138;-0.55869116289906706196 -0.20569018244471373724 0.96253110644368122806 0.4176549888507755659 -0.18396792992801511146 -0.37959963877478752892 -0.46523197220948503405 -0.21621514145859807576 -0.64055293813324543084 -0.85091435174294605126 -0.039126974751317301904 0.55949596492165742934;-0.18696899010471518254 0.22951255587799676561 -0.74574396788844166117 -1.0548876750033766569 -0.78978978938674426757 0.30135858900258460924 -0.75001846148800532799 -0.19598675516253466489 0.041250331123307212855 -0.13800977056754767935 0.12924477843364734486 0.73271348298042493496;0.69383464823174245684 -0.67610357244648344732 -0.34457886888663746827 0.47460457687003393401 0.86902887632500180892 -0.19761296105520045896 0.62901964985727898405 0.21810847314007103526 0.17272545424038113215 -0.14089387816255202757 -0.46782349434155845458 -0.37287331772721205025;0.74740176023923976523 -0.12947282223991279926 -0.22524008626604011263 0.16460664388398044133 -0.80354916537296627865 0.15701003209799452298 -0.60533922506869108915 0.66551491013405850161 -0.46258909434018785634 -0.022878950502654635257 -0.58099347409708534951 -0.057168911252879456297;0.21818682473745329431 -0.29808635564958951836 -0.50411115621129709563 -1.0317707597628371641 0.48225651394802915295 -0.21656159386280782186 -0.21608988329234141146 -0.42162659261045143388 -1.1304462632454059801 0.35741254891333618104 -0.1144975020912004926 -0.53169155743530094327;0.41797658225903483453 -0.54426010768572130605 0.099800046458770400037 0.53676762090220542234 -0.85461357539186988408 0.25853698573176470132 -0.50230417096047963454 -0.23944369909596843748 -0.78894350552262049181 -0.37086042331925361815 0.88623707345251878653 0.0598872288924149343;-0.46015189064731337742 0.67053873953320797252 -0.51825154601350664763 0.88435932527845084739 0.33986695670402655711 -0.021164581555452501721 -0.49918075298986880339 -0.35975642526777806829 -0.59041597955496960548 -0.54716583582278122133 0.24405620044040093886 0.68595668286251376689;-0.080247678553143159119 0.75285164179917041238 0.30908515956376336753 0.77865163078651966622 -0.3279958966847258961 -0.72912184664206480811 -0.022282444070368383204 -0.21510365322645658148 0.65086561170165013746 0.20817473602623740025 0.57250061828187204238 0.6331184625030663593;-0.22888766027522292057 0.87092854075932668589 0.85004714451752183546 -0.11538732908839319236 0.48417001612732801785 0.01408014716635732147 -0.58880837025274956886 -0.29492332742440774407 -0.44865951739326981329 -0.060718154821353467754 -0.66046962328016256549 -0.0043766633845587852442;-0.96923873285695449908 0.52079486153217013911 -0.61915011145901321932 -0.22326559136943152639 0.14143946052228270616 -0.13662539628073303022 -0.30824615879790040474 -0.11160338381955538234 -0.073240553838264429998 -0.25666971292296764107 -0.37760063362459700409 0.73297933669489090391;-0.6850631113665105465 -0.32229444997590644961 0.11471231382942782828 0.50800144411475134376 0.4339039878438296638 -0.29572098377033406713 0.68662927827620756638 0.41626236388419041168 -0.69531928319759295221 -0.66914444644079018598 -0.29634313837412223913 -0.57429202018636482663];

% Layer 2
b2 = -0.20522586431336631296;
LW2_1 = [-0.71494319203419820496 -0.44997170790406737506 -0.50773153343776344926 0.16885981803210589614 0.12133774534236216325 0.25996028593762954273 0.41606123267285277656 0.67929983780917368996 0.50876502047794158745 -0.2536379950108776371 0.3203085935923087324 0.63886169447995322379 -0.92900932153234561106 -0.1271091758406349137 0.48201531344948644886 0.39140658127572403036 0.13027521741574968339 -0.26611852024112908621 0.093798450309379347023 0.1195755463836642718];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.333333333333333;
y1_step1.xoffset = 3;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
